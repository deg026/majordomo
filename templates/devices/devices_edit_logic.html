[#if OK#]
<div class="alert alert-success"><#LANG_DATA_SAVED#></div>
[#endif OK#]
[#if ERR#]
<div class="alert alert-error"><#LANG_FILLOUT_REQURED#></div>
[#endif ERR#]

<form action="?" method="get" class="form">
        <select name="method" onchange="this.form.submit();" class="form-control">
            [#begin METHODS#]
            <option value="[#TITLE#]" [#if SELECTED="1"#] selected[#endif#]><#LANG_METHOD#>: [#DESCRIPTION#]</option>
            [#end METHODS#]
        </select>
        <input type="hidden" name="id" value="<#ID#>">
        <input type="hidden" name="view_mode" value="<#VIEW_MODE#>">
        <input type="hidden" name="edit_mode" value="<#EDIT_MODE#>">
        <input type="hidden" name="tab" value="<#TAB#>">
</form>
<!-- Table 'devices' edit -->
<form action="?" method="post" enctype="multipart/form-data" name="frmEdit" id="frmEdit" class="form">
    <fieldset>


        <div class="form-group">
            <div>
                [#if ERRORS!=""#]<br><font color='red'>[#ERRORS#]</font><br>[#endif ERRORS#]
                <!--#
                <a href="#" onClick="return editBlockly();"><#LANG_EDIT#></a>
                #-->
                [#module name="blockly_code" system_name="object<#OBJECT_ID#>_method<#METHOD_ID#>" code_field="code" action=""#]
                <div id="code_area">
                    <textarea name="code" id="code" rows=30 cols=100 class="form-control">[#CODE#]</textarea>
                </div>
            </div>
        </div>


        <div class="form-group">
            <label class="control-label">
                &nbsp;
            </label>
            <div>
                [#if ID!=""#]
                <button type="submit" name="subm" value="Submit" class="btn btn-primary"><#LANG_SUBMIT#></button>
                [#else ID#]
                <button type="submit" name="subm" value="Add" class="btn btn-primary"><#LANG_ADD#></button>
                [#endif ID#]
                <a href="?" class="btn btn-default " onclick="if (window.self !== window.top) {parent.$.fancybox.close();return false;}"><#LANG_CANCEL#></a>
                <input type="hidden" name="id" value="<#ID#>">
                <input type="hidden" name="view_mode" value="<#VIEW_MODE#>">
                <input type="hidden" name="edit_mode" value="<#EDIT_MODE#>">
                <input type="hidden" name="mode" value="update">
                <input type="hidden" name="tab" value="<#TAB#>">
                <input type="hidden" name="method" value="<#METHOD#>">
            </div>
        </div>
    </fieldset>
</form>
